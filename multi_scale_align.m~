function [ im_aligned ] = multi_scale_align( A, S, D, N )
%MULTI_SCALE_ALIGN Uses a Gaussian image pyramid to align an image S to an
%                  anchor A within a displacement range D

%Generate the image pyramid
p = {S};
for i = 2:N
    p{end+1} = blur_and_resize(p{end}, i);
end

%Align the image
shift = [0 0];
DD =
for i = 1:size(p,2)
    DY = D + shift(1);
    DX = D + shift(2); 
    shift = single_scale_align(A, p{i}, DY, DX);
end


end

